---

- name: gather facts
  setup:
    gather_subset:
      - os_family
      - pkg_mgr
  tags: ['network']

- name: Include OS-specific variables.
  include_vars: "{{ ansible_os_family }}.yml"
  tags: ['network']

- include: networkmanager.yml
  when: use_networkmanager|bool
  tags: ['network']

- include: systemd-networkd.yml
  when: use_systemdnetwork|bool
  tags: ['network']

- include: udev-rules.yml
  when: wireless|bool
  tags: ['network', 'wireless']

- include: wpa_supplicant.yml
  when: (systemd_networkd_network or systemd_networkd_link or systemd_networkd_netdev) and (wireless|bool)
  tags: ['network', 'wireless']
