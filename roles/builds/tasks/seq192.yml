---

- name: check if seq192 is already installed
  stat: path="/usr/local/bin/seq192"
  register: haziseq192
  tags: ['seq192']


- block:
    - block:
      - name: Clone seq192
        git:
          repo: "{{ seq192.git }}"
          dest: "{{ local_src }}/seq192"
          accept_hostkey: yes
          update: no
          force: no

      - name: Make and install
        command: bash -lc "make && sudo make install"
        args:
          chdir: "{{ local_src }}/seq192"
        register: seq192_build
        failed_when: seq192_build.failed

      - name: Clean up build directory
        command: bash -lc "make distclean"
        args:
          chdir: "{{ local_src }}/seq192"

      become: True
      become_user: "{{ user.name }}"


  when: "not haziseq192.stat.exists"
