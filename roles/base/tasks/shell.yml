---

- block:
    - name: Push zshell templates
      template:
        src: "dots/{{ item }}.j2"
        dest: "{{ user.home }}/.{{ item }}"
        owner: "{{ user.name }}"
        group: "{{ user.group }}"
        mode: "0644"
        backup: yes
      with_items:
        - "aliases"
        - "gitconfig"
        - "zlogin"
        - "zshenv"
        - "zshrc"

    - name: Push zshell function folder
      synchronize:
        src: dots/zsh/
        dest: "{{ user.home }}/.zsh/"
        recursive: yes
        mode: push
        delete: no
        checksum: yes
        perms: no
        rsync_opts: "--update"

    - name: install kitty config
      copy:
        src: "dots/config/kitty/kitty.conf"
        dest: "{{ user.home }}/.config/kitty/kitty.conf"
        owner: "{{ user.name }}"
        group: "{{ user.group }}"
        mode: '0644'
        backup: yes
        directory_mode: no
      tags: ['kitty']

  become: True
  become_user: "{{ user.name }}"
  tags: ['ui']
