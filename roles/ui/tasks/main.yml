---

- name: starting ui role
  debug:
    msg: "starting ui role"

- name: Include OS-specific variables.
  include_vars: "{{ ansible_os_family }}.yml"

- block:
    - name: set packages to install
      set_fact:
        _packages: "{{ (ui.i3 + ui.qt + ui.x11 + ui.fonts + ui.themes) }}"

    - name: Install ui packages
      import_role:
        name: pkg_manager
      vars:
        pkg_state: present

  tags: ['packages', 'i3', 'qt', 'x11', 'fonts', 'theme']

- include: x11.yml
  tags: ['x11']

- include: i3.yml
  tags: ['i3']

- include: theme.yml
  tags: ['theme']

- include: autologin.yml
  when: autologin|bool
  tags: ['autologin']

- include: termpdf.yml
  tags: ['utils']

- name: set thunar as default for opening directories
  shell: |
    xdg-mime default thunar.desktop inode/directory
  become: True
  become_user: "{{ user.name }}"
  tags: ['thunar']

- name: set graphical-target as default
  shell: |
    systemctl set-default graphical.target
  register: graphicaltarget
  changed_when: graphicaltarget.rc != 0
  tags: ['test']
