---

- name: starting ui role
  debug:
    msg: "starting ui role"

- name: Include OS-specific variables.
  include_vars: "{{ ansible_os_family }}.yml"
  tags: ['i3', 'x11', 'theme', 'fonts']

- name: copy help file to user home dir
  copy:
    src: key_bindings.md
    dest: "{{ user.home }}/key_bindings.md"
    owner: "{{ user.name }}"
    group: "{{ user.group }}"
    mode: '0644'
    backup: no
    directory_mode: no
  tags: ['help']

- include: qt.yml
  tags: ['qt']

- include: x11.yml
  when: install_x11|bool
  tags: ['x11']

- include: xprofile.yml
  tags: ['xprofile']

- include: i3.yml
  when: install_i3|bool
  tags: ['i3']

- include: autologin.yml
  when: autologin|bool
  tags: ['autologin']

- include: theme.yml
  tags: ['theme']

- name: set graphical-target as default
  shell: |
    systemctl set-default graphical.target
  when: graphical_target|bool

- include: atom.yml
  when: inventory_hostname in groups['desktops']

- name: generate fehbg from template
  template:
    src: "dots/fehbg.j2"
    dest: "{{ user.home }}/.fehbg"
    owner: "{{ user.name }}"
    group: "{{ user.group }}"
    mode: "0775"
    backup: yes
  tags: ['wallpaper']
