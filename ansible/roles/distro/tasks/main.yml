---

- name: starting distro role
  debug:
    msg: "starting distro role"

- name: Include OS-specific variables.
  include_vars: "{{ ansible_os_family }}.yml"

- name: set /usr/local and /opt to be writable by group
  shell: |
    mkdir -pv /usr/local/{bin,lib,soundbot,share,src} && \
    mkdir -pv /opt && \
    chmod -R 0775 /usr/local/ && \
    chmod -R 0775 /opt && \
    chgrp -R {{ user.group }} /usr/local/ && \
    chgrp -R {{ user.group }} /opt && \
    mkdir -pv /usr/share/desktop-directories && \
    chmod 0775 /usr/share/desktop-directories

- include_tasks: RedHat.yml
  when: "ansible_os_family == 'RedHat'"
  tags: ['redhat']

- include_tasks: Debian.yml
  when: "ansible_os_family == 'Debian'"
  tags: ['debian']

- include_tasks: Archlinux.yml
  when: "ansible_os_family == 'Archlinux'"
  tags: ['archlinux']
