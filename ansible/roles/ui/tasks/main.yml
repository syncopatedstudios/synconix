---

- include: x11.yml
  when: install_x11|bool
  tags: ["x11"]

- include: i3.yml
  when: install_i3|bool
  tags: ["i3"]

- include: autologin.yml
  when: autologin|bool
  tags: ['autologin']

- include: theme.yml
  tags: ['theme']

- name: set packages to install
  set_fact:
    _ui_gutilities: "{{ ui['gutilities']|difference(installed_packages) }}"
  tags: ['packages']

- name: Install GUI utils like mpv, feh, qpdfview, etc
  shell: "{{ ansible_pkg_mgr }} -y install {{ _ui_gutilities | join(' ') }}"
  when: "_ui_gutilities | length > 0 and install_gutilities|bool"
  tags: ['packages']
