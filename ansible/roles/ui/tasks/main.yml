---

- name: copy help file to ~/.config/help.md
  copy:
    src: help.md
    dest: "{{ user.home }}/.config/help.md"
    owner: "{{ user.name }}"
    group: "{{ user.group }}"
    mode: '0644'
    backup: no
    directory_mode: no
  tags: ['help']

- include: x11.yml
  when: install_x11|bool
  tags: ["x11"]

- include: i3.yml
  when: install_i3|bool
  tags: ["i3"]

- include: autologin.yml
  when: autologin|bool
  tags: ['autologin']

- include: theme.yml
  tags: ['theme']

- name: set graphical-target as default
  shell: |
    systemctl set-default graphical.target
  when: graphical_target|bool

- name: set multimedia packages to install
  set_fact:
    _ui_gutilities: "{{ ui['gutilities']|difference(installed_packages) }}"
  tags: ['packages']

- name: Install multimedia utils like mpv, feh, qpdfview, etc
  shell: "{{ __ansible_pkg_mgr_install }} {{ _ui_gutilities | join(' ') }}"
  when: "_ui_gutilities | length > 0 and install_gutilities|bool"
  tags: ['packages']
