---

- name: install ruby gem dependencies
  shell: |
    {{ ansible_pkg_mgr }} -y install {{ development['ruby'] | join(' ') }}
  when: item not in installed_packages
  with_items:
    - "{{ development['ruby'] }}"
  tags: ['packages', 'development', 'ruby']

- name: install nokogiri and solargraph
  shell: |
    sudo gem install {{ item }} --no-user-install
  with_items:
    - nokogiri
    - solargraph
  become: True
  become_user: "{{ user.name }}"
  when: solargraph|bool
