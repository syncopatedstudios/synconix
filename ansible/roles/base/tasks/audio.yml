---

- name: starting audio role
  debug:
    msg: "starting audio role"

- include: audio/pipewire.yml
  tags: ['pipewire']

- include: audio/alsa.yml
  tags: ['alsa']

- include: tuning.yml
  tags: ['tuning']

#-------------------------------------#

- name: makesfz and makeh2drumkit
  copy:
    src: "usr/local/bin/{{ item }}"
    dest: "/usr/local/bin/{{ item }}"
    owner: root
    group: root
    mode: '0775'
  with_items:
    - makeh2kit
    - makesfz
  tags: ['utils']

# - name: create fmit config directory
#   file:
#     path: "{{ user.home }}/.config/fmit/fmit.conf.j2"
#     state: directory
#     owner: "{{ user.name }}"
#     group: "{{ user.name }}"
#   tags: ['fmit']
#
# - name: install fmit config
#   template:
#     src: "dots/config/fmit/fmit.conf.j2"
#     dest: "{{ user.home }}/.config/fmit/fmit.conf"
#     owner: "{{ user.name }}"
#     group: "{{ user.name }}"
#     mode: '0644'
#   tags: ['fmit']

- name: Sync .desktop files to /usr/local
  synchronize:
    src: "usr/local/share/applications/"
    dest: "/usr/local/share/applications/"
    recursive: yes
    mode: push
    delete: no
    checksum: yes
    perms: no
    rsync_opts: "--update"
  tags: ['xdg']

# - include: audio/moc.yml
#   tags: ['moc']
