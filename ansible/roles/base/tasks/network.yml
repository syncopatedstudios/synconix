---

- name: starting network role
  debug:
    msg: "starting network role"

- import_tasks: network/cleanup.yml

- include: network/networkmanager.yml
  when: use_networkmanager|bool

- include: network/systemd-networkd.yml
  when: use_systemdnetwork|bool

- block:
    - name: install iwd config
      copy:
        src: etc/iwd/main.conf
        dest: /etc/iwd/main.conf
        owner: root
        group: root
        mode: '0644'
        backup: no

    - name: enable iwd service
      systemd:
        name: iwd
        state: restarted
        enabled: yes
  when: wireless|bool
